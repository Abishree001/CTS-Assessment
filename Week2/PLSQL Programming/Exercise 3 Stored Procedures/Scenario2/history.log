b1bd6872-d06e-4196-b629-7b5fe40a81d9:1751025624228:31:S:BEGIN\n  EXECUTE IMMEDIATE 'DROP PROCEDURE TransferFunds';\nEXCEPTION\n  WHEN OTHERS THEN\n    IF SQLCODE != -4043 THEN RAISE; END IF;\nEND;\n/
bd66ab68-0b2c-4a9e-a0b2-a350e082d914:1751025624546:57:S:BEGIN\n  EXECUTE IMMEDIATE 'DROP TABLE accounts CASCADE CONSTRAINTS';\nEXCEPTION\n  WHEN OTHERS THEN\n    IF SQLCODE != -942 THEN RAISE; END IF;\nEND;\n/
e0d52ff2-e159-4ae5-9971-7ddf261c17df:1751025624893:18:S:CREATE TABLE accounts (\n  acc_no NUMBER PRIMARY KEY,\n  holder_name VARCHAR2(100),\n  balance NUMBER\n);
0fdfa6e8-58e4-433c-8603-544277769707:1751025625073:16:S:INSERT INTO accounts VALUES (401, 'Koushika', 8000);
ef7574cf-8a6d-40ff-8ebf-64052d5636cb:1751025625172:3:S:INSERT INTO accounts VALUES (402, 'Madhu', 3000);
6c0a52a3-b0c1-468c-adc0-2c6191540046:1751025625225:3:S:COMMIT;
d6e7d225-cbf6-4eff-b123-93faa1c20e5b:1751025627564:42:S:CREATE OR REPLACE PROCEDURE TransferFunds(\n  from_acc IN NUMBER,\n  to_acc IN NUMBER,\n  amount IN NUMBER\n) IS\nBEGIN\n  -- Deduct from source account if balance is sufficient\n  UPDATE accounts\n  SET balance = balance - amount\n  WHERE acc_no = from_acc AND balance >= amount;\n\n  -- Check if the deduction actually happened\n  IF SQL%ROWCOUNT = 0 THEN\n    RAISE_APPLICATION_ERROR(-20001, 'Insufficient balance or invalid source account.');\n  END IF;\n\n  -- Add to destination account\n  UPDATE accounts\n  SET balance = balance + amount\n  WHERE acc_no = to_acc;\n\n  -- Check if destination account exists\n  IF SQL%ROWCOUNT = 0 THEN\n    RAISE_APPLICATION_ERROR(-20002, 'Invalid destination account.');\n  END IF;\n\n  COMMIT;\n  DBMS_OUTPUT.PUT_LINE('Transfer completed successfully.');\nEXCEPTION\n  WHEN OTHERS THEN\n    ROLLBACK;\n    DBMS_OUTPUT.PUT_LINE('Transfer failed: ' || SQLERRM);\nEND;\n/
115a0a89-2618-4b79-b9f6-47ae377f5de7:1751025627773:51:S:BEGIN\n  TransferFunds(401, 402, 1000);\nEND;\n/
cee55b78-946c-451a-84d2-c266f6489181:1751025627971:24:S:SELECT * FROM accounts;
